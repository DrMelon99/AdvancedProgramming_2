# AdvancedProgramming
한남대학교 23년도 2학기 고급프로그래밍 팀 프로젝트

---
## 팀원
박제혁, 명지호, 오소민

---
### 실행
1. 실행 방법 -> jjuggumi_game\jjuggumi_game.sln을 Visual Studio로 연 다음, F5로 디버깅 및 실행
2. jjuggumi_game\x64\Debug\jjuggumi_game.exe 실행

---
#### 과제 세부사항
📋 기능 분석 중
⚙️ 기능 구현 진행 전
🔨 기능 구현 진행 중
✅ 기능 구현 완료

0. 시스템 변경사항
```
✅ 인트로 진행 도중 아무 키 누르면 스킵
🔨 0 번 플레이어 이름 확인 및 편집
✅ 다이얼로그 동작 매커니즘 및 구조 변경
    - 한국어 깨짐 이슈로 인해 게임의 모든 언어를 영어로 변경
✅ 게임 4종류를 각자 다른 소스파일로 구분
🔨 기존 "무궁화 꽃이 피었습니다" 구동 지원
📋 프로젝트 리팩토링
✅ 디버그 상태 창 추가
```
1. 플레이어 및 아이템 관련
```
✅ jjuggumi.dat 파일에서 플레이어 & 아이템 데이터를 읽어오는 형식으로 변경
✅ 플레이어의 모든 정보를 구조체 형식으로 변환
    - PLAYER 구조체 구성
        번호, 이름, 지능 (intel), 힘 (str), 스태미나(stamina), 생존 여부, 아이템 소지 여부, ITEM 아이템 정보, 플레이어 현재 위치, 플레이어 이동 속도
✅ 아이템 정보를 구조체 형식으로 구성
    - 번호, 이름, 지능 버프, 힘 버프, 스태미나 버프, 아이템 위치 x,y

✅ 게임이 하나씩 끝날 때마다 스태미나 일정량 회복(40 ~ 50%)
✅ 오류처리 (return -1)
    - 플레이어 데이터를 불러오는데 문제가 있으면 오류 출력
```
2. 상태 창 관련
```
✅ 무궁화 꽃이 피었습니다
    - 살아남은 플레이어 수
    - n번 플레이어 생존 여부
✅ 야간운동
    - 살아남은 플레이어 수
    - n번 플레이어 생존 여부, 지능(+ 지능 버프), 힘(+ 힘 버프), 스태미나%
⚙️ 줄다리기
    - 양 측의 유효 힘, 유효 지능 합
    - 살아남은 플레이어 수
    - n번 플레이어 생존 여부
⚙️ 제비뽑기
    - 현재 라운드, 선택을 진행 중인 플레이어
```
3. 야간운동
```
✅ 0번 플레이어가 탈락하면 게임 자동 진행
✅ 아이템 및 플레이어를 배치 관련
    - 아이템과 플레이어는 각각 다른 위치에 랜덤으로 배치
    - 아이템의 종류는 배치 될때 결정이 되어야 함
    - 아이템의 표시를 'I'에서 '$'로 바꿈
✅ NPC는 <아이템 / 아이템을 소지한 플레이어> 를 향해 이동
    - 랜덤으로 돌아다니다가, 반경 5칸 이내에 아이템이나 아이템을 소지한 플레이어가 있으면 그것을 향해 이동
    - 아이템을 소지한 플레이어 보다는 아이템을 우선으로 향함
    - n번 플레이어가 아이템 및 아이템을 소지한 플레이어와 상호작용을 했을 경우 3초 동안 아이템 및 아이템을 소지한 플레이어를 향하지 않고 방황함
    - 주기는 랜덤으로, 적당히 맞출 것
✅ 아이템 관련 (인접 칸)
    - 모든 플레이어는 아이템을 하나씩 획득 가능
    - 모든 플레이어는 아이템을 미 소지하고 있으면 아이템을 바로 획득
    - 0번 플레이어의 경우, 이미 아이템을 소지한 상태라면 다이얼로그를 통해 <교환 / 무시> 선택 가능
    - 나머지 플레이어는 50% 확률로 <교환 / 무시>
    - 아이템을 교환하는 경우, 내려놓은 아이템은 플레이어 반경 3칸 이내 범위의 위치로 흩어짐 (아이템을 던지는 느낌)
    - 아이템을 교환하지 않는 경우, 아이템을 줍지 않고 그대로 둠
    - 플레이어는 아이템을 획득하는 시점에서 아이템의 스태미나 버프 만큼 스태미나 회복
✅ 플레이어 관련 (인접 칸)
    - 인접한 플레이어 모두의 스태미나가 적어도 1 이상이어야 상호작용 가능
    - 인접한 플레이어 모두가 아이템을 가지고 있지 않다면 서로 무시함
    - 인접한 플레이어 중 아이템이 없는 플레이어가 <강탈 / 회유 / 무시>중 하나를 택함
    - 인접한 플레이어 모두가 아이템을 가지고 있다면 둘 중 하나가 <강탈 / 회유 / 무시>중 하나를 택함
    - 0번 플레이어의 경우
        -- 다른 플레이어가 0번 플레이어에게 접근한 경우에도 선택권은 0번 플레이어에게 있음
        -- 게임을 잠시 멈추고 다이얼로그를 통해 <강탈 / 회유 / 무시>를 고름
    - 공격 옵션
        <강탈 : Force>
            마주친 플레이어 중 한명이라도 아이템을 가지고 있을 시 발생 가능
        <회유 : Intercept>
            마주친 플레이어 중 한명이라도 아이템을 가지고 있을 시 발생 가능
        <무시 : Ignor>
            마주친 플레이어 중 아무도 아이템을 가지고 있지 않을 시, 또는 플레이어 결정에 따라 발생
✅ 아이템 및 플레이어와 상호작용을 한 플레이어는 1초 동안 움직임 외의 상호작용을 쉼 (연속 상호작용을 방지하기 위함 -> 쿨타임) 
✅ 아이템 및 플레이어의 상호작용 결과를 다이얼로그에 표시 (1초 동안)
    - n번 플레이어가 아이템을 얻거나 기존 아이템을 교환했을 시
    - n번 플레이어가 m번 플레이어에게서 아이템 뺏기나 교환을 성공 했을 시
```
4. 줄다리기
```
⚙️ 맵 관련
    - 길쭉한 형태의 맵 생성
    - 맵의 가운데에는 구멍을 생성
    - 플레이어들 사이의 3칸은 '---'로 채움
    - 플레이어들을 가운데를 가운데를 기준으로 번갈아 왼쪽, 오른쪽으로 배치 (ex. 6420---1357)
⚙️ 플레이어 관련
    - 줄다리기 라운드는 패자 부활전이며, 이전에 탈락했던 플레이어는 아이템이 없는 상태로 시작하고 줄다리기에서 이기면 부활, 패배하면 탈락함
    - 이전 탈락했던 플레이어의 생존정보 뒤에 '*'을 붙임
    - 이전 탈락하지 않았던 플레이어가 패배할 시, 소지 아이템을 몰수하고 힘과 지능 기본값이 절반으로 하락함
⚙️ 줄 당기기
    - 각 양측의 유효 힘의 합을 더해 음수면 왼쪽으로, 양수면 오른쪽으로 이동
    - 만약 플레이어가 구멍에 빠지면 탈락 및 탈락자 다이얼로그에 표시
⚙️ 게임 조작 관련 (게임 마스터)
    - 줄 당기기
        -- 'z' -> 왼쪽으로 당김 str -1, '/' 오른쪽으로 당김 str + 1
    - 눕기
        -- 1초 동안 유지됨
        -- 'x' -> 왼쪽 팀 누움, '.' -> 오른쪽 팀 누움
        -- 눕기를 쓴 팀은 순간적으로 힘이 두배가 되고, 그 시간에는 2칸을 움직임
        -- 두 팀이 함꼐 누울 수 있음
        -- 눕기를 사용할 시 모든 플레이어는 스태미나가 -30%
    -! 게임 조작 후 다이얼로그에 표시
```
5. 제비뽑기
```
⚙️ 살아남은 참가자 만큼 제비를 준비하고 섞음
    - 제비 중 1개만 탈락이며, 나머지는 통과
    - 제비를 배치하는 시점에 각각 <통과 / 탈락>을 설정함
⚙️ 상태창에는 현재 라운드와 선택을 진행 중인 플레이어를 출력
⚙️ 제비를 고르는 플레이어 순서는 매 라운드마다 랜덤으로 설정
⚙️ 좌우 화살표로 제비를 고르고, 스페이스 바로 제비를 뽑음
    - '?': 제비
    - '@': 뽑으려 하는 제비
⚙️ n번째 플레이어가 제비를 골랐다면 <통과 / 탈락> 결과를 다이얼로그를 통해 출력
    - 통과일 경우: 선택된 제비를 화면에서 제거하고 나머지 제비로 라운드 계속 진행
    - 탈락일 경우: 선택된 제비를 화면에서 제거하고 살아남은 플레이어 수 만큼 나머지 제비를 섞은 후 다음 라운드 진행
⚙️ 한명만 남으면 즉시 엔딩으로 넘어가서 쭈꾸미 게임을 종료함
⚙️ 강제종료 'q'를 눌러 종료가 된 시점에서 생존자가 2명 이상이면 "우승자를 가리지 못했습니다." 출력
```
